"use strict";(self.webpackChunkmaven_knowledge_docs=self.webpackChunkmaven_knowledge_docs||[]).push([[4585],{595:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"pagination","title":"Pagination","description":"All Maven Knowledge API endpoints are paginated for fast, reliable access to even very large datasets.","source":"@site/docs/pagination.md","sourceDirName":".","slug":"/pagination","permalink":"/docs/pagination","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Example Queries & Filtering","permalink":"/docs/queries"},"next":{"title":"Error Handling","permalink":"/docs/error-handling"}}');var s=a(4848),r=a(8453);const i={},o="Pagination",l={},d=[{value:"Default Page Size",id:"default-page-size",level:2},{value:"How to Paginate",id:"how-to-paginate",level:2},{value:"Example: Fetching All Data with Python",id:"example-fetching-all-data-with-python",level:2},{value:"Pagination Best Practices",id:"pagination-best-practices",level:2}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"pagination",children:"Pagination"})}),"\n",(0,s.jsxs)(n.p,{children:["All Maven Knowledge API endpoints are ",(0,s.jsx)(n.strong,{children:"paginated"})," for fast, reliable access to even very large datasets.",(0,s.jsx)(n.br,{}),"\n","This prevents timeouts and makes sure you can retrieve exactly as much data as you need, in manageable chunks."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"default-page-size",children:"Default Page Size"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Maximum page size:"})," 1000 rows per request",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.em,{children:"(This is also the default if you do not specify a Range header.)"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"how-to-paginate",children:"How to Paginate"}),"\n",(0,s.jsxs)(n.p,{children:["To fetch additional rows beyond the first 1000, set the standard HTTP ",(0,s.jsx)(n.code,{children:"Range"})," header in your request:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"Range: 0-999\nGET /rest/v1/arrivals_all\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The Range uses ",(0,s.jsx)(n.strong,{children:"zero-based indexing"})," (",(0,s.jsx)(n.code,{children:"0-999"})," for the first 1000 rows, ",(0,s.jsx)(n.code,{children:"1000-1999"})," for the next 1000, and so on)."]}),"\n",(0,s.jsx)(n.li,{children:"Continue incrementing the range until you receive an empty response (or a partial page)."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"example-fetching-all-data-with-python",children:"Example: Fetching All Data with Python"}),"\n",(0,s.jsxs)(n.p,{children:["Here\u2019s a real-world Python example that ",(0,s.jsx)(n.strong,{children:"automatically loops through all pages"})," and aggregates the results:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import requests\nimport pandas as pd\n\nMK_API_URL = "https://YOUR_PROJECT.supabase.co"\nMK_API_KEY = "YOUR_ANON_KEY"\n\nCLIENT_EMAIL = "client@example.com"\nCLIENT_PASSWORD = "YOUR_PASSWORD!"\n\n# Authenticate to get access token (see Authentication docs)\nauth_url = f"{MK_API_URL}/auth/v1/token?grant_type=password"\nauth_headers = {"apikey": MK_API_KEY, "Content-Type": "application/json"}\nauth_payload = {"email": CLIENT_EMAIL, "password": CLIENT_PASSWORD}\nauth_response = requests.post(auth_url, headers=auth_headers, json=auth_payload)\naccess_token = auth_response.json()["access_token"]\n\n# Set up headers for data request\nrest_url = f"{MK_API_URL}/rest/v1/arrivals_all"\nheaders = {"apikey": MK_API_KEY, "Authorization": f"Bearer {access_token}"}\n\nall_data = []\npage = 0\npage_size = 1000\n\nwhile True:\n    range_start = page * page_size\n    range_end = range_start + page_size - 1\n    combined_headers = {**headers, "Range": f"{range_start}-{range_end}"}\n\n    response = requests.get(rest_url, headers=combined_headers)\n    if response.status_code != 200:\n        print(f"Error fetching data: {response.status_code} - {response.text}")\n        break\n\n    batch = response.json()\n    if not batch:\n        break  # No more data to fetch\n    all_data.extend(batch)\n    print(f"Retrieved {len(batch)} rows (page {page + 1})")\n    page += 1\n\nprint(f"Total rows downloaded: {len(all_data)}")\n'})}),"\n",(0,s.jsx)(n.p,{children:"This script will keep looping\u2014fetching 1000 rows at a time\u2014until no more data is returned."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"pagination-best-practices",children:"Pagination Best Practices"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Always use the Range header to avoid timeouts with large queries."}),"\n",(0,s.jsx)(n.li,{children:"You can combine Range and filter queries (e.g., by date or product) for more targeted results."}),"\n",(0,s.jsx)(n.li,{children:"If your total results are less than 1000, you\u2019ll only get a single response."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["For help building paginated integrations in other languages, or for extremely large data exports, ",(0,s.jsx)(n.a,{href:"/docs/support",children:"contact Support"}),"."]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>o});var t=a(6540);const s={},r=t.createContext(s);function i(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);